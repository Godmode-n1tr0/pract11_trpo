<Page x:Class="pract7.Pages.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:converters="clr-namespace:pract7.Converters"
      Title="Главная страница"
      Background="{DynamicResource WindowBackground}"
      Height="500"
      Width="900">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Style="{StaticResource DefaultBorderStyle}">
            <StackPanel Orientation="Horizontal">
                <Label Content="Врач:" Style="{StaticResource BoldLabelStyle}"/>
                <Label x:Name="DoctorLabel" Content="" Style="{StaticResource DefaultLabelStyle}"/>
                <Label Content="Специализация:" Style="{StaticResource BoldLabelStyle}"/>
                <Label x:Name="SpecLabel" Content="" Style="{StaticResource DefaultLabelStyle}"/>

                <Separator Style="{StaticResource DefaultSeparatorStyle}"/>

                <Label Content="Врачей:" Style="{StaticResource BoldLabelStyle}"/>
                <Label Content="{Binding DoctorCount}" Style="{StaticResource DefaultLabelStyle}" FontWeight="Bold"/>

                <Label Content="Пациентов:" Style="{StaticResource BoldLabelStyle}"/>
                <Label Content="{Binding PatientCount}" Style="{StaticResource DefaultLabelStyle}" FontWeight="Bold"/>
            </StackPanel>
        </Border>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="184"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,1,0" Style="{StaticResource DefaultBorderStyle}">
                <StackPanel Style="{StaticResource DefaultStackPanelStyle}">
                    <Label Content="Управление" Style="{StaticResource BoldLabelStyle}"/>
                    <Button Content="Создать пациента" Style="{StaticResource AddButtonStyle}" Click="CreatePatient_Click"/>
                    <Button Content="Начать прием" Style="{StaticResource StandardButtonStyle}" Click="StartAppointment_Click"/>
                    <Button Content="Изменить инфо" Style="{StaticResource StandardButtonStyle}" Click="EditPatient_Click"/>
                    <Button Content="Удалить пациента" Style="{StaticResource DeleteButtonStyle}" Click="DeletePatient_Click"/>
                </StackPanel>
            </Border>

            <StackPanel Grid.Column="1" Style="{StaticResource DefaultStackPanelStyle}">
                <Label Content="Список пациентов:" Style="{StaticResource BoldLabelStyle}" FontSize="14"/>
                <ListView x:Name="PatientsList"
              Height="350"
              ItemsSource="{Binding Patients}"
              SelectedItem="{Binding SelectedPatient, Mode=TwoWay}"
              Style="{StaticResource DefaultListViewStyle}">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="5">
                                <TextBlock Text="{Binding LastName}" FontWeight="Bold"/>
                                <TextBlock Text="{Binding Name}" Margin="0,2,0,0"/>
                                <TextBlock Text="{Binding PhoneNumber, Converter={StaticResource PhoneNumberConverter}}" Margin="0,2,0,0"/>
                                <TextBlock Text="{Binding Birthday, StringFormat=dd.MM.yyyy}" Margin="0,2,0,0"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </StackPanel>
        </Grid>
    </Grid>
</Page>